<% layout(_view.get(_layout)) %>

<%- include(_view.get('_part/attr/checkbox'), {
    attr: 'active'
}) %>

<%- include(_view.get('_part/attr/string'), {
    attr: 'name'
}) %>

<%- include(_view.get('_part/attr/string'), {
    attr: 'subject'
}) %>

<%- include(_view.get('_part/attr/text'), {
    attr: 'text',
    rows: 4
}) %>

<%- include(_view.get('_part/attr/checkList'), {
    attr: 'methods',
    items: model.constructor.getAttrValueLabels('methods'),
}) %>

<%- include(_view.get('_part/attr/json'), {
    attr: 'options'
}) %>

<%- include(_view.get('_part/group/tabs'), {
    items: [{
        id: 'Messages',
        hint: 'Messages created by this notice',
        content: {
            template: _view.get('_part/attr/relation'),
            attr: 'noticeMessages',
            css: 'no-label',
            data: {
                columns: [{
                    name: 'subject'
                }, {
                    name: 'text'
                }, {
                    name: 'sentAt',
                    format: 'timestamp'
                }, {
                    name: 'createdAt',
                    format: 'timestamp'
                }],
                link: null,
                unlink: null,
                create: null
            }
        }
    }, {
        id: 'User filters',
        hint: 'Message recipients for this notice',
        content: {
            template: _view.get('_part/attr/relation'),
            attr: 'userFilters',
            css: 'no-label',
            data: {
                columns: [{
                    name: 'name'
                },{
                    name: 'label'
                }, {
                    name: 'description'
                }],
                delete: null
            }
        }
    }, {
        id: 'Users',
        hint: 'Message recipients for this notice',
        content: {
            template: _view.get('_part/attr/relation'),
            attr: 'users',
            css: 'no-label',
            data: {
                columns: [{
                    name: 'name'
                }, {
                    name: 'email'
                }],
                delete: null
            }
        }
    }]
}) %>