<%
const jsonTemplate = _view.get('_part/attr/json');
const relationTemplate = _view.get('_part/attr/relation');
const stringTemplate = _view.get('_part/attr/string');
%>
<% layout(_view.get(_layout)) %>

<%- include(_view.get('_part/attr/checkbox'), {
    attr: 'active'
}) %>

<%- include(stringTemplate, {
    attr: 'name'
}) %>

<%- include(stringTemplate, {
    attr: 'subject'
}) %>

<%- include(_view.get('_part/attr/text'), {
    attr: 'text',
    rows: 4
}) %>

<%- include(_view.get('_part/attr/checkList'), {
    attr: 'methods',
    items: model.constructor.getAttrValueLabels('methods'),
}) %>

<%- include(jsonTemplate, {
    attr: 'recipient',
    extHint: 'User filter configuration to select recipients when message creating'
}) %>

<%- include(jsonTemplate, {
    attr: 'messageTemplate',
    extHint: 'Message template class configuration'
}) %>

<%- include(jsonTemplate, {
    attr: 'options'
}) %>

<%- include(_view.get('_part/group/tabs'), {
    items: [{
        id: 'Messages',
        hint: 'Messages created by this notification',
        content: {
            template: relationTemplate,
            attr: 'messages',
            css: 'no-label',
            data: {
                columns: [{
                    name: 'subject'
                }, {
                    name: 'text'
                }, {
                    name: 'sentAt',
                    format: 'timestamp'
                }, {
                    name: 'createdAt',
                    format: 'timestamp'
                }],
                link: null,
                unlink: null,
                create: null
            }
        }
    }, {
        id: 'User filters',
        hint: 'User filters to select recipients when notification sending',
        content: {
            template: relationTemplate,
            attr: 'userFilters',
            css: 'no-label',
            data: {
                columns: [{
                    name: 'name'
                },{
                    name: 'label'
                }, {
                    name: 'description'
                }],
                delete: null
            }
        }
    }, {
        id: 'Users',
        hint: 'Message recipients for this notification',
        content: {
            template: relationTemplate,
            attr: 'users',
            css: 'no-label',
            data: {
                columns: [{
                    name: 'name'
                }, {
                    name: 'email'
                }],
                delete: null
            }
        }
    }]
}) %>